<section>
    <h3>Información básica</h3>
    <div [formGroup]="formGroup" nz-form nzLayout="vertical">
        <nz-form-item>
            <nz-form-label nzFor="email">Dominio</nz-form-label>
            <nz-form-control>
                <input nz-input placeholder="Dominio" formControlName="domain"/>
            </nz-form-control>
        </nz-form-item>

        <nz-form-item>
            <nz-form-label>Nombre</nz-form-label>
            <nz-form-control>
                <input nz-input placeholder="Nombre" formControlName="name"/>
            </nz-form-control>
        </nz-form-item >

        <nz-form-item>
            <nz-form-label>Ubicación</nz-form-label>
            <nz-form-control>
                <input nz-input placeholder="Ubicación" formControlName="location"/>
            </nz-form-control>
        </nz-form-item>

        <nz-form-item>
            <nz-form-label>Archivo de inicio</nz-form-label>
            <nz-form-control>
                <input nz-input placeholder="Archivo de inicio" formControlName="startupFile"/>
            </nz-form-control>
        </nz-form-item>

        <nz-form-item>
            <nz-form-label>URL</nz-form-label>
            <nz-form-control>
                <input nz-input placeholder="URL" formControlName="url"/>
            </nz-form-control>
        </nz-form-item>

        <nz-form-item>
            <nz-form-label>Observación</nz-form-label>
            <nz-form-control>
                <textarea rows="2" nz-input placeholder="Observación" formControlName="observation"></textarea>
            </nz-form-control>
        </nz-form-item>
       
    </div>
</section>
<section>
    <h3>Despliegue</h3>
    <div [formGroup]="formGroup" nz-form nzLayout="vertical">
        <div class="flex">
            <nz-form-item>
                <nz-form-label>Entorno de ejecución</nz-form-label>
                <nz-form-control>
                    <nz-select style="width: 18em;" nzPlaceHolder="Entorno de ejecución" formControlName="runtimeEnvironment">
                        <nz-option nzValue="Node.js" nzLabel="Node.js"/>
                        <nz-option nzValue="Python" nzLabel="Python"/>
                        <nz-option nzValue="PHP" nzLabel="PHP"/>
                        <nz-option [nzValue]="null" nzLabel="Sin interno de ejecución"/>
                    </nz-select>
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label>Framework</nz-form-label>
                <nz-form-control>
                    <nz-select style="width: 9em;"  nzPlaceHolder="Framework" formControlName="framework">
                        <nz-option nzValue="Angular" nzLabel="Angular"/>
                        <nz-option nzValue="NestJS" nzLabel="NestJS"/>
                        <nz-option nzValue="FastAPI" nzLabel="FastAPI"/>
                    </nz-select>
                </nz-form-control>
            </nz-form-item>
    
            <nz-form-item>
                <nz-form-label>Desplegado en</nz-form-label>
                <nz-form-control>
                    <nz-select style="width: 15em;" nzPlaceHolder="Desplegado en" formControlName="runningOn">
                        <nz-option nzValue="PM2" nzLabel="PM2"/>
                        <nz-option nzValue="Docker" nzLabel="Docker"/>
                        <nz-option nzValue="LiteSpeed" nzLabel="LiteSpeed"/>
                        <nz-option nzValue="Apache" nzLabel="Apache"/>
                    </nz-select>
                </nz-form-control>
            </nz-form-item>
        </div>

        <nz-form-item>
            <nz-form-label>Ignorara archivos o directorio</nz-form-label>
            <nz-form-control>
                <nz-select formControlName="ignore" style="width: 100%;" nzMode="tags" [nzTokenSeparators]="[',']" nzPlaceHolder="Ignorara archivos o directorio">
                    <!-- <nz-option *ngFor="let option of listOfOption" [nzLabel]="option.label" [nzValue]="option.value"></nz-option> -->
                </nz-select>
            </nz-form-control>
        </nz-form-item>

        <div>

        </div>
    </div>
</section>
<section>
    <h3>Variables de entorno</h3>
    <ul>
        @for (envForm of formGroup.controls.env.controls; track i; let last = $last, first = $first, i = $index) {
            <li [formGroup]="envForm">
                <nz-input-group nzCompact>
                    <div style="display: grid; grid-template-columns: auto 1fr auto;">
                        <input type="text" nz-input formControlName="name" placeholder="Nombre" style="text-transform: uppercase; font-weight: 500;"/>
                        <input type="text" nz-input formControlName="value" placeholder="Valor" />
                        <div class="actions">
                            <button nz-button [disabled]="first"><</button>
                            <button nz-button [disabled]="last">></button>
                            <button nz-button (click)="onClickDeleteEnv(i)">x</button>
                        </div>
                    </div>
                </nz-input-group>
            </li>
        }
        <div style="padding: 1em 0;">
            <button nz-button (click)="onClickAddEnv()">Agrega variable de entorno</button>
        </div>
    </ul>
</section>

<section class="flex">
    <button nz-button nzType="default">Reiniciar aplicación</button>
    <button nz-button nzType="default" [nzLoading]="loading()">Descartar cambios</button>
    <button nz-button nzType="primary" [nzLoading]="loading()" (click)="onClickSave()">Guardar cambios</button>
</section>